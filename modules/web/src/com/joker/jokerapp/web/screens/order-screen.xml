<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://caption"
        class="com.joker.jokerapp.web.screens.OrderScreen"
        messagesPack="com.joker.jokerapp.web.screens">
    <dsContext>
        <collectionDatasource id="productItemCategoriesDs"
                              class="com.joker.jokerapp.entity.ProductItemCategory"
                              view="productCategory-view">
            <query>
                <![CDATA[select e from jokerapp$ProductItemCategory e order by e.sortOrder ]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="productItemsDs"
                              class="com.joker.jokerapp.entity.ProductItem"
                              view="productItem-view">
            <query>
                <![CDATA[select e from jokerapp$ProductItem e order by e.sortOrder]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="productModifierCategoriesDs"
                              class="com.joker.jokerapp.entity.ProductModifierCategory"
                              view="productModifierCategory-view">
            <query>
                <![CDATA[select e from jokerapp$ProductModifierCategory e]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="productModifiersDs"
                              class="com.joker.jokerapp.entity.ProductModifier"
                              view="productModifier-view">
            <query>
                <![CDATA[select e from jokerapp$ProductModifier e]]>
            </query>
        </collectionDatasource>
        <datasource id="orderDs"
                    class="com.joker.jokerapp.entity.Order"
                    view="order-view"/>
        <collectionDatasource id="orderLinesDs"
                              class="com.joker.jokerapp.entity.OrderLine"
                              refreshMode="NEVER"
                              view="order-line-view"/>
    </dsContext>
    <dialogMode height="600"
                width="800"/>
    <layout margin="true"
            spacing="true">
        <split height="100%"
               maxSplitPosition="95%"
               minSplitPosition="95%"
               orientation="vertical"
               pos="95%"
               responsive="true"
               width="100%">
            <split height="100%"
                   maxSplitPosition="5%"
                   minSplitPosition="5%"
                   orientation="vertical"
                   pos="5%"
                   width="100%">
                <buttonsPanel height="100%"
                              width="100%">
                    <button id="addBtn"
                            caption="+"
                            invoke="onAddBtnClick"/>
                    <button id="subtractBtn"
                            caption="-"
                            invoke="onSubtractBtnClick"/>
                    <button id="removeBtn"
                            caption="REMOVE"
                            invoke="onRemoveBtnClick"/>
                    <button id="addModifier"
                            caption="MODIFY"
                            invoke="onAddModifierClick"/>
                    <button id="addManualModifier"
                            caption="MANUAL MODIFY"
                            invoke="onAddManualModifierClick"/>
                    <button id="printBtn"
                            caption="PRINT"
                            invoke="onPrintBtnClick"/>
                </buttonsPanel>
                <split height="662px"
                       maxSplitPosition="32%"
                       minSplitPosition="32%"
                       orientation="horizontal"
                       pos="32%"
                       width="100%">
                    <vbox expand="orderLineScrollBox_groupBox"
                          height="100%">
                        <groupBox id="orderLineScrollBox_groupBox">
                            <scrollBox id="orderLineScrollBox"
                                       height="100%">
                                <dataGrid id="orderLineDataGrid"
                                          columnResizeMode="SIMPLE"
                                          columnsCollapsingAllowed="false"
                                          datasource="orderLinesDs"
                                          editorBuffered="false"
                                          headerVisible="false"
                                          height="520px"
                                          reorderingAllowed="false"
                                          selectionMode="MULTI"
                                          settingsEnabled="false"
                                          sortable="false"
                                          width="100%">
                                    <columns>
                                        <column id="quantity"
                                                collapsible="false"
                                                maximumWidth="40"
                                                minimumWidth="40"
                                                property="quantity"
                                                resizable="false"
                                                sortable="false"/>
                                        <column id="itemName"
                                                collapsible="false"
                                                maximumWidth="460"
                                                minimumWidth="460"
                                                property="itemName"
                                                resizable="false"
                                                sortable="false"/>
                                        <column id="price"
                                                collapsible="false"
                                                maximumWidth="50"
                                                minimumWidth="50"
                                                property="price"
                                                resizable="false"
                                                sortable="false"/>
                                    </columns>
                                </dataGrid>
                            </scrollBox>
                        </groupBox>
                        <hbox id="sumGroupBox"
                              align="BOTTOM_RIGHT"
                              height="110px"
                              width="100%">
                            <groupBox align="TOP_RIGHT"
                                      height="100%"
                                      settingsEnabled="false"
                                      width="450px">
                                <label align="MIDDLE_RIGHT"
                                       value="Subtotal"/>
                                <label align="MIDDLE_RIGHT"
                                       value="Service 10%"/>
                                <label align="MIDDLE_RIGHT"
                                       value="Total"/>
                            </groupBox>
                            <groupBox align="TOP_RIGHT"
                                      height="100%"
                                      settingsEnabled="false"
                                      width="140px">
                                <currencyField id="subTotalField"
                                               align="MIDDLE_RIGHT"
                                               currency="€"
                                               editable="false"
                                               width="110px"/>
                                <currencyField id="serviceField"
                                               align="MIDDLE_RIGHT"
                                               currency="€"
                                               editable="false"
                                               width="110px"/>
                                <currencyField id="totalField"
                                               align="MIDDLE_RIGHT"
                                               currency="€"
                                               editable="false"
                                               width="110px"/>
                            </groupBox>
                        </hbox>
                    </vbox>
                    <split height="100%"
                           maxSplitPosition="65%"
                           minSplitPosition="65%"
                           orientation="horizontal"
                           pos="65%"
                           width="100%">
                        <groupBox height="100%">
                            <split id="itemsSplit"
                                   height="100%"
                                   maxSplitPosition="90%"
                                   minSplitPosition="90%"
                                   orientation="vertical"
                                   pos="90%"
                                   settingsEnabled="false"
                                   width="100%">
                                <grid id="itemsGrid"
                                      margin="true"
                                      spacing="true"
                                      width="100%">
                                    <columns count="4"/>
                                    <rows>
                                        <row/>
                                        <row/>
                                        <row/>
                                        <row/>
                                    </rows>
                                </grid>
                                <buttonsPanel height="100%"
                                              width="100%">
                                    <button id="itemsBackBtn"
                                            align="MIDDLE_LEFT"
                                            caption="PREV"
                                            height="50px"
                                            invoke="onItemsBackBtnClick"
                                            width="380px"/>
                                    <button id="itemsNextBtn"
                                            align="MIDDLE_RIGHT"
                                            caption="NEXT"
                                            height="50px"
                                            invoke="onItemsNextBtnClick"
                                            width="380px"/>
                                </buttonsPanel>
                            </split>
                        </groupBox>
                        <groupBox height="100%">
                            <split id="categoriesSplit"
                                   height="100%"
                                   maxSplitPosition="90%"
                                   minSplitPosition="90%"
                                   orientation="vertical"
                                   pos="90%"
                                   settingsEnabled="false"
                                   width="100%">
                                <grid id="categoriesGrid"
                                      margin="true"
                                      responsive="true"
                                      spacing="true"
                                      width="100%">
                                    <columns count="1"/>
                                    <rows>
                                        <row/>
                                    </rows>
                                </grid>
                                <buttonsPanel id="buttonPanel"
                                              height="100%"
                                              width="100%">
                                    <button id="categoriesBackBtn"
                                            align="MIDDLE_LEFT"
                                            caption="PREV"
                                            height="50px"
                                            invoke="onCategoriesBackBtnClick"
                                            width="200px"/>
                                    <button id="categoriesNextBtn"
                                            align="MIDDLE_RIGHT"
                                            caption="NEXT"
                                            height="50px"
                                            invoke="onCategoriesNextBtnClick"
                                            width="200px"/>
                                </buttonsPanel>
                            </split>
                        </groupBox>
                    </split>
                </split>
            </split>
            <buttonsPanel height="100%"
                          responsive="true"
                          width="100%">
                <button id="saveBtn"
                        caption="Close"
                        invoke="onSaveBtnClick"/>
                <button id="billBtn"
                        caption="Bill"
                        invoke="onBillBtnClick"/>
            </buttonsPanel>
        </split>
    </layout>
</window>
